<?php

require '../template.php';
require 'menu.php';

$html  = getHeader('..', 'custom-color-format', 'Documentation / Demos / Custom Color Formats');
$html .= '<div class="content-primary">';
$html .= '<form action="#" method="get">';
$html .= '<h2>Custom Color Formats</h2>';

$template  = '<div data-role="collapsible" data-collapsed="false"';
$template .= ' data-theme="b" data-content-theme="d"';
$template .= ' data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d">';
$template .= '<h3>%s</h3>';
$template .= '<div data-role="fieldcontain">';
$template .= '<label for="%s">Pick a color:</label>';
$template .= '<input id="%s" type="text" name="%s" value="%s" />';
$template .= '</div>';
$template .= '<div data-role="collapsible" data-theme="c" data-content-theme="d">';
$template .= '<h3>Code</h3>';
$template .= '<pre><code class="javascript">%s</code></pre>';
$template .= '</div>%s';
$template .= '</div>';

$demos = array(
    array(
        'title' => 'HEX (default)',
        'id' => 'color0',
        'value' => '#445566',
        'fiddle' => 'http://sandbox.chromoselector.com/bEt5W/',
        'code' => "$(document).ready(function () {
    $('#color0').chromoselector();
});"
    ),
    array(
        'title' => 'Comma separated RGB',
        'id' => 'color1',
        'value' => 'rgb(41,160,126)',
        'fiddle' => 'http://sandbox.chromoselector.com/DPhNG/',
        'code' => "$(document).ready(function () {
    $('#color1').chromoselector({
        color2str: function (color) {
            return color.getRgbString();
        }
     });
});"
    ),
    array(
        'title' => 'Comma separated RGBA',
        'id' => 'color2',
        'value' => 'rgba(41,160,126,1)',
        'fiddle' => 'http://sandbox.chromoselector.com/qHMZt/',
        'code' => "$(document).ready(function () {
    $('#color2').chromoselector({
        panelAlpha: true,
        color2str: function (color) {
            return color.getRgbaString();
        }
     });
});"
    ),
    array(
        'title' => 'Comma separated HSL',
        'id' => 'color3',
        'value' => 'hsl(338,36%,22%)',
        'fiddle' => 'http://sandbox.chromoselector.com/gwPXd/',
        'code' => "$(document).ready(function () {
    $('#color3').chromoselector({
        color2str: function (color) {
            return color.getHslString();
        }
    });
});"
    ),
    array(
        'title' => 'Comma separated HSLA',
        'id' => 'color4',
        'value' => 'hsla(338,36%,22%,1)',
        'fiddle' => 'http://sandbox.chromoselector.com/TgzXA/',
        'code' => "$(document).ready(function () {
    $('#color4').chromoselector({
        panelAlpha: true,
        color2str: function (color) {
            return color.getHslaString();
        }
    });
});"
    ),
    array(
        'title' => 'Hex RGB without "#"',
        'id' => 'color5',
        'value' => 'c9db99',
        'fiddle' => 'http://sandbox.chromoselector.com/7y5RW/',
        'code' => "$(document).ready(function () {
    $('#color5').chromoselector({
        str2color: function (str) {
            return '#' + str;
        },
        color2str: function (color) {
            return color.getHexString().substring(1);
        }
    });
});"
    ),
    array(
        'title' => 'JSON encoded CMYK',
        'id' => 'color6',
        'value' => '{&quot;c&quot;:0.54,&quot;m&quot;:0.23,&quot;y&quot;:0,&quot;k&quot;:0.31}',
        'fiddle' => 'http://sandbox.chromoselector.com/tLVVg/',
        'code' => "$(document).ready(function () {
    $('#color6').chromoselector({
        str2color: function (str) {
            try {
                return $.parseJSON(str);
            } catch (e) {}
        },
        color2str: function (color) {
            var cmyk = color.getCmyk();
            for (var i in cmyk) {
                cmyk[i] = Math.round(cmyk[i] * 100) / 100;
            }
            return JSON.stringify(cmyk);
        }
    });
});"
    ),
    array(
        'title' => 'RGB as an integer',
        'id' => 'color7',
        'value' => '9087362',
        'fiddle' => 'http://sandbox.chromoselector.com/E8V2C/',
        'code' => "$(document).ready(function () {
    $('#color7').chromoselector({
        str2color: function (str) {
            var num = parseInt(str, 10) || 0;
            return {
                r: ((num & (255*255*255)) >> 16) / 255,
                g: ((num & (255*255)) >> 8) / 255,
                b: ((num & (255))) / 255
            };
        },
        color2str: function (color) {
            var rgb = color.getRgb();
            var num = (Math.round(rgb.r * 255) << 16)
                + (Math.round(rgb.g * 255) << 8)
                + Math.round(rgb.b * 255)
            return num;
        }
    });
});"
    ),
);


foreach ($demos as $value) {
    if (! empty($value['fiddle'])) {
        $value['fiddle'] = '<a data-role="button" data-theme="c" href="' . $value['fiddle'] . '">jsFiddle</a>';
    } else {
        $value['fiddle'] = '';
    }
    $html .= sprintf(
        $template,
        $value['title'],
        $value['id'],
        $value['id'],
        $value['id'],
        $value['value'],
        $value['code'],
        $value['fiddle']
    );
}

$html .= '</form>';
$html .= '</div>';
$html .= '<div class="content-secondary">';
$html .= '<nav>';
$html .= '<ul data-role="listview"  data-theme="c" ';
$html .= 'data-dividertheme="d" data-count-theme="e">';
$html .= getDemosMenu('..', 'custom-color-format');
$html .= '</ul>';
$html .= '</nav>';
$html .= '</div>';
$html .= getFooter('..');

echo tidy_up($html);

?>

