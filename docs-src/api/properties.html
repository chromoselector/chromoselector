<?php

require '../template.php';
require 'menu.php';

$html  = getHeader('..', 'interior', 'Documentation / API / Properties');
$html .= '<div class="content-primary">';

$html .= '<fieldset class="ui-grid-a">';
$html .= '<div class="ui-block-a">';
$html .= '<a class="expand" href="#" data-role="button" data-mini="true">Expand all</a></div>';
$html .= '<div class="ui-block-b">';
$html .= '<a class="collapse" href="#" data-role="button" data-mini="true">Collapse all</a></div>';
$html .= '</fieldset>';

$html .= '<h2>General Properties</h2>';

$template  = '<div data-role="collapsible"';
$template .= ' data-theme="b" data-content-theme="d"';
$template .= ' data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d">';
$template .= '<h3>%s</h3>';
$template .= '<p class="ui-li-aside"><strong>Default:</strong> %s</p>';
$template .= '<p><strong>Description:</strong><br />%s</p>';
$template .= '<p><strong>Values:</strong> %s</p>';
$template .= '%s';
$template .= '%s';
$template .= '</div>';

$properties = array(
    'autosave' => array(
        'default' => '<i>true</i>',
        'description' => 'Whether to automatically update the value in the source text'
                    . ' input when the user selects a new color. In you set this to false, '
                    . 'you will need to manually invoke the "save" method on the chromoselector object'
                    . 'when you would like for the color to be saved.',
        'values' => '<i>true</i> or <i>false</i>',
        'samples' => array(
            "// This is the default\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        autosave: true\n"
                ."    });\n"
                ."});\n",
            "// This will save the color when the colorpicker loses focus\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        autosave: false\n"
                ."    }).blur(function () {\n"
                ."        $(this).chromoselector('save');\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'autoshow' => array(
        'default' => '<i>true</i>',
        'description' => 'Whether to automatically show the color picker when the '
                    . 'source text input receives focus. If you set this to false, '
                    . 'you will need to manually invoke the "show" and "hide" methods '
                    . 'on the chromoselector object when you would like to show and hide '
                    . 'the color picker.',
        'values' => '<i>true</i> or <i>false</i>',
        'samples' => array(
            "// This is the default\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        autoshow: true\n"
                ."    });\n"
                ."});\n",
            "// This will show color picker when the user clicks inside\n"
                . "// the source text input and hide it when the element loses focus\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        autoshow: false\n"
                ."    }).click(function () {\n"
                ."        $(this).chromoselector('show');\n"
                ."    }).blur(function () {\n"
                ."        $(this).chromoselector('hide');\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'diameter' => array(
        'default' => '180',
        'description' => 'The total width of the color picker widget in pixels. '
                       . 'This includes a fixed padding on both sides.',
        'values' => 'An integer between 100 and 400. Any values outside of '
                    . 'this range will be clipped to the nearest legal value.',
        'samples' => array(
            "// Sets the outside widget width to 320 pixels\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        diameter: 320\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'effect' => array(
        'default' => '"fade"',
        'description' => 'Which animation effect to use when showing/hiding the color picker widget.'
                        . ' If you wish to disable animations, set the "speed" property to 0.',
        'values' => '"fade" or "slide"',
        'samples' => array(
            "// Slides the picker down/up when showing/hiding it\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        effect: 'slide'\n"
                ."    });\n"
                ."});\n",
            "// No animation\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        speed: 0\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'icon' => array(
        'default' => '<i>undefined</i>',
        'description' => 'The URL to an image file. This is used to display an icon '
                            . 'beside the color picker, which is then used to show it '
                            . 'when clicked.',
        'values' => 'A string containing the URL of the icon to show.',
        'samples' => array(
            "// Absolute address\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        icon: 'http://www.chromoselector.com/images/favicon.png'\n"
                ."    });\n"
                ."});\n",
            "// Relative address\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        icon: '../images/favicon.png'\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'iconpos' => array(
        'default' => '"right"',
        'description' => 'Defines on which side of the source text input to display the icon. '
                        . 'Does nothing, if the "icon" property is not set.',
        'values' => '"left" or "right"',
        'samples' => array(
            "// Display icon on left\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        icon: 'http://www.chromoselector.com/images/favicon.png',\n"
                ."        iconpos: 'left'\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'lazy' => array(
        'default' => '<i>true</i>',
        'description' => 'Whether to defer the rendering of the color picker object.<br/> '
                        . '<p>When set to <i>true</i>, the rendering of the colorpicker does not start '
                        . 'until the mouseover event is triggered on the source text input. '
                        . 'When set to <i>false</i>, the rendering occurs straight away.</p>'
                        . 'Does nothing, if the "autoshow" property is set to <i>false</i>.',
        'values' => '<i>true</i> or <i>false</i>',
        'samples' => array(
            "// Render the color picker when the page is loaded\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        lazy: false\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'preview' => array(
        'default' => '<i>true</i>',
        'description' => 'Whether to show a preview box of the currently selected color '
                         . 'above the color picker widget. You can show a preview somewhere '
                         . 'else by registering to the "update" event.',
        'values' => '<i>true</i> or <i>false</i>',
        'samples' => array(
            "// This is the default\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        preview: true\n"
                ."    });\n"
                ."});\n",
            "// Don't show a preview\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        preview: false\n"
                ."    });\n"
                ."});\n",
            "// Show a preview in the background of the input element\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        preview: false,\n"
                ."        update: function () {\n"
                ."            $(this).css(\n"
                ."                'background-color',\n"
                ."                $(this).chromoselector('getColor').hex\n"
                ."            );\n"
                ."        }\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'resizable' => array(
        'default' => '<i>true</i>',
        'description' => 'Whether the color picker should be resizable or not.',
        'values' => '<i>true</i> or <i>false</i>',
        'samples' => array(
            "// This is the default\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        resizable: true\n"
                ."    });\n"
                ."});\n",
            "// Do not allow resizing\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        resizable: false\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'shadow' => array(
        'default' => '8',
        'description' => 'The amount of shadow to drop under the color picker in pixels. '
                        . 'The shadow will be scaled in proporting to the color picker '
                        . 'during resize operations.',
        'values' => 'A positive integer or 0',
        'samples' => array(
            "// No shadow\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        shadow: 0\n"
                ."    });\n"
                ."});\n",
            "// A big shadow\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        shadow: 16\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'speed' => array(
        'default' => '400',
        'description' => 'The duration of the show/hide animations.',
        'values' => 'A positive integer or 0, this will be interpreted as a number of milliseconds, '
                    . 'also: "fast", "medium" and "slow"',
        'samples' => array(
            "// A slow animation\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        speed: 'slow'\n"
                ."    });\n"
                ."});\n",
            "// No animation\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        speed: 0\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'target' => array(
        'default' => '<i>null</i>',
        'description' => 'Allows to specify a terget container where to put the '
                        . 'color picker. If a custom container is used, note that '
                        . 'you will need to ensure yourself that the color picker '
                        . 'is correctly positioned on the page.',
        'values' => '<i>null</i> to use the default target container positioned below the '
                    . 'source text input<br />A selector, a DOM object or a jQuery object are also acceptable '
                    . 'and will allow custom positioning of the color picker.',
        'samples' => array(
            "// Sample custom target\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        target: '#myContainer'\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'width' => array(
        'default' => '.33',
        'description' => 'The thickness of the hue selector (the outer ring of the color picker)',
        'values' => 'A number between 0.1 and 1.0',
        'samples' => array(
            "// Use a thin hue selector\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        width: 0.2\n"
                ."    });\n"
                ."});\n"
        )
    )
);


foreach ($properties as $key => $value) {
    $samples = '';
    if (! empty($value['samples'])) {
        foreach ($value['samples'] as $sample) {
            $samples .= '<pre><code class="javascript">' . htmlspecialchars($sample) . '</code></pre>';
        }
    }

    $links = '';
    if (! empty($value['links'])) {
        $links = '<strong>See also:</strong><ul>';
        foreach ($value['links'] as $link) {
            $links .= '<li>';
            $links .= '<a href="'. $link['url'] . '">' . $link['text'] . '</a>';
            $links .= '</li>';
        }
        $links .= '</ul>';
    }

    $html .= sprintf(
        $template,
        $key,
        $value['default'],
        $value['description'],
        $value['values'],
        $samples,
        $links
    );
}

$html .= '<h2>Callbacks</h2>';

$properties = array(
    'save()' => array(
        'default' => '<i>undefined</i>',
        'description' => 'This function is responsible for saving back the value of the color '
                        . 'to the source element. When not defined, a default internal function is used.',
        'values' => '<i>undefined</i> or <i>function</i>',
        'samples' => array(
            "// This is the equivalent of the default function\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        save: function (value) {\n"
                ."            // The value comes in already formatted\n"
                ."            // and only needs to be placed somewhere\n"
                ."            $(this).val(\n"
                ."                value\n"
                ."            ).html(\n"
                ."                value\n"
                ."            );\n"
                ."        }\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'load()' => array(
        'default' => '<i>undefined</i>',
        'description' => 'This function is responsible for reading in the value of the color '
                        . 'from the source element. When not defined, a default internal function is used.',
        'values' => '<i>undefined</i> or <i>function</i>',
        'samples' => array(
            "// This is the equivalent of the default function\n"
                ."$(document).ready(function () {\n"
                ."    $('input.color').chromoselector({\n"
                ."        // The value only needs to be read in here\n"
                ."        // the parsing will be done at a later stage\n"
                ."        load: function () {\n"
                ."            return $(this).val() || $(this).html();\n"
                ."        }\n"
                ."    });\n"
                ."});\n"
        )
    ),
    'str2color()' => array(
        'default' => '<i>undefined</i>',
        'description' => 'This function is responsible for parsing a string into a format '
                        . 'that can be interpreted by the Color class. When not defined, '
                        . 'a default internal function is used.',
        'values' => '<i>undefined</i> or <i>function</i>',
        'links' => array(
            array('url' => '../demos/custom-color-format.html', 'text' => 'Demo - Custom Color Format'),
            array('url' => 'color-manipulation.html', 'text' => 'Object - Color')
        )
    ),
    'color2str()' => array(
        'default' => '<i>undefined</i>',
        'description' => 'This function is responsible for parsing a string into a format '
                        . 'that can be interpreted by the Color class. When not defined, '
                        . 'a default internal function is used.',
        'values' => '<i>undefined</i> or <i>function</i>',
        'links' => array(
            array('url' => '../demos/custom-color-format.html', 'text' => 'Demo - Custom Color Format'),
            array('url' => 'color-manipulation.html', 'text' => 'Object - Color')
        )
    )
);

foreach ($properties as $key => $value) {
    $samples = '';
    if (! empty($value['samples'])) {
        $samples = '<p><strong>Sample usage:</strong>';
        foreach ($value['samples'] as $sample) {
            $samples .= '<pre><code class="javascript">' . htmlspecialchars($sample) . '</code></pre>';
        }
        $samples .= '</p>';
    }

    $links = '';
    if (! empty($value['links'])) {
        $links = '<strong>See also:</strong><p>';
        foreach ($value['links'] as $link) {
            $links .= '';
            $links .= '<a href="'. $link['url'] . '">' . $link['text'] . '</a>';
            $links .= '</p>';
        }
        $links .= '';
    }

    $html .= sprintf(
        $template,
        $key,
        $value['default'],
        $value['description'],
        $value['values'],
        $samples,
        $links
    );
}

$html .= '</div>';
$html .= '<div class="content-secondary">';
$html .= '<ul data-role="listview"  data-theme="c" data-dividertheme="d">';
$html .= getApiMenu('..', 'properties');
$html .= '</ul>';
$html .= '</div>';
$html .= getFooter();

echo $html;

?>
