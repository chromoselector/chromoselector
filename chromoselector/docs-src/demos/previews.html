<?php

require '../template.php';
require 'menu.php';

$html  = getHeader('..', 'previews', 'Documentation / Demos / Color Previews');
$html .= '<div class="content-primary">';
$html .= '<form action="#" method="get">';
$html .= '<h2>Color Previews</h2>';

$template  = '<div data-role="collapsible" data-collapsed="false"';
$template .= ' data-theme="b" data-content-theme="d"';
$template .= ' data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d">';
$template .= '<h3>%s</h3>';
$template .= '<div data-role="fieldcontain">';
$template .= '<label for="%s">Pick a color:</label>';
$template .= '<input type="text" name="%s" id="%s" value="%s" />';
$template .= '</div>';
$template .= '<div data-role="collapsible" data-theme="c" data-content-theme="d">';
$template .= '<h3>Code</h3>';
$template .= '<pre><code class="javascript">%s</code></pre>';
$template .= '</div>%s';
$template .= '</div>';

$demos = array(
    array(
        'title' => 'Inline Preview',
        'id' => 'inline',
        'color' => '#000000',
        'fiddle' => 'http://sandbox.chromoselector.com/bEt5W/',
        'code' => "$(document).ready(function () {\n"
                . "    $('#inline').chromoselector({\n"
                . "        preview: true\n"
                . "     })\n"
                . "});\n"
    ),
    array(
        'title' => 'No Preview',
        'id' => 'no_preview',
        'color' => '#000000',
        'code' => "$(document).ready(function () {\n"
                . "    $('#no_preview').chromoselector({\n"
                . "        preview: false\n"
                . "     })\n"
                . "});\n"
    ),
    array(
        'title' => 'Preview in textfield',
        'id' => 'textfield',
        'color' => '#7bda1b',
        'fiddle' => 'http://sandbox.chromoselector.com/ADrH5/',
        'code' => "$(document).ready(function () {\n"
                . "    var updatePreview = function() {\n"
                . "        var color = $(this).chromoselector('getColor');\n"
                . "        $(this).css({\n"
                . "            'background-color': color.getHexString(),\n"
                . "            'color': color.getTextColor().getHexString(),\n"
                . "            'text-shadow': '0 1px 0 ' + color.getTextColor().getTextColor().getHexString()\n"
                . "        });\n"
                . "    };\n"
                . "    $('#textfield').chromoselector({\n"
                . "        preview: false,\n"
                . "        create: updatePreview,\n"
                . "        update: updatePreview\n"
                . "    });\n"
                . "});\n"
    )
);

foreach ($demos as $value) {
    if (! empty($value['fiddle'])) {
        $value['fiddle'] = '<a data-role="button" data-theme="c" href="' . $value['fiddle'] . '">jsFiddle</a>';
    } else {
        $value['fiddle'] = '';
    }
    $html .= sprintf(
        $template,
        $value['title'],
        $value['id'],
        $value['id'],
        $value['id'],
        $value['color'],
        $value['code'],
        $value['fiddle']
    );
}

$html .= '<div data-role="collapsible" data-collapsed="false"';
$html .= ' data-theme="b" data-content-theme="d"';
$html .= ' data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d">';
$html .= '<h3>Preview in textfield (static mode)</h3>';
$html .= '<div data-role="fieldcontain">';
$html .= '<div id="static_preview_picker">
            <label for="static_preview">Pick a color:</label>
            <input id="static_preview" type="text" value="#7bda1b"/>
          </div>
          <div style="clear:both"></div>';
$html .= '</div>';
$html .= '<div data-role="collapsible" data-theme="c" data-content-theme="d">';
$html .= '<h3>Code</h3>';
$html .= '<pre><code class="javascript">$(document).ready(function() {
    var updatePreview = function() {
        var color = $(this).chromoselector("getColor");
        $(this).css({
            "background-color": color.hex,
            "color": color.getTextColor().hex,
            "text-shadow": "0 1px 0 " + color.getTextColor().getTextColor().hex
        });
    };
    // Initialise the color picker
    $("#basic2").chromoselector({
        target: "#picker",
        autoshow: false,
        width: 285,
        preview: false,
        create: updatePreview,
        update: updatePreview
    }).chromoselector("show", 0);
});</code></pre>';
$html .= '</div>';
$html .= '<a data-role="button" data-theme="c" href="http://sandbox.chromoselector.com/ECryt/">jsFiddle</a>';
$html .= '</div>';

$html .= '</form>';
$html .= '</div>';
$html .= '<div class="content-secondary">';
$html .= '<nav>';
$html .= '<ul data-role="listview"  data-theme="c" ';
$html .= 'data-dividertheme="d" data-count-theme="e">';
$html .= getDemosMenu('..', 'previews');
$html .= '</ul>';
$html .= '</nav>';
$html .= '</div>';
$html .= getFooter('..');

echo tidy_up($html);

?>

