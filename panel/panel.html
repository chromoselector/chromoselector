<!DOCTYPE html>
<html lang="en">
<head>
    <title>multi panel test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../jquery-ui/ui-lightness/jquery-ui-1.9.1.custom.min.css" />
    <script src="../jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="../jquery-ui/jquery-ui-1.9.1.custom.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    // Shortens code below
    var addColorStop = 'addColorStop';
    var fillRect = 'fillRect';
    var fillStyle = 'fillStyle';
    var strokeStyle = 'strokeStyle';
    var globalCompositeOperation = 'globalCompositeOperation';

    function preventDefault(e) {
        e.preventDefault();
    }
    /**
     * Function call throttling
     */
    var throttle = (function() {
        return function(fn, timeout) {
            var timer, args, invoke, tick;
            timeout = timeout || 4;
            tick = function () {
                if (invoke) {
                    fn.apply({}, args);
                    invoke = 0;
                    timer = setTimeout(tick, timeout);
                } else {
                    timer = 0;
                }
            };
            return function() {
                args = arguments;
                invoke = 1;
                if (! timer) {
                    tick();
                }
            };
        };
    })();


    function getEventPosition(self, e, $obj) {
        var x = 0, y = 0;
        var oe = e.originalEvent;
        var touch = oe.touches || oe.changedTouches;
        var offset;
        var previewHeight;
        if (self) {
            offset = $obj.parent().offset();
            previewHeight = self._preview.outerHeight();
        } else {
            offset = $obj.offset();
            previewHeight = 0;
        }
        if (touch) {
            // touchscreen
            x = touch[0].pageX - offset.left;
            y = touch[0].pageY - offset.top - previewHeight;
        } else if (e.pageX) {
            // mouse
            x = e.pageX - offset.left;
            y = e.pageY - offset.top - previewHeight;
        }
        return [x, y];
    }
    </script>

    <script src="panel.js" type="text/javascript"></script>

    <script src="../color-module/color.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        panel = new Panel(
            $('#panel'),
            'hsl',
            ['rgb', 'hsl', 'cmyk'],
            true,
            false,
            200,
            24,
            5,
            true,
            '#000'
        );

        $('#setHeight').keyup(function (){
            panel.setHeight($(this).val());
        });
    });

    </script>
    <style type="text/css">
    body {
        margin: 2em;
    }
    #panel select {
        border: 1px solid gray;
        margin-bottom: 10px;
        width: 100%;
    }
    #panel {
        float: left;
        padding: 10px;
        background-color: #ddd;
    }

    #api {
        width: 250px;
        clear: both;
        padding-top: 2em;
    }
    #api input {
        float: right;
        width: 50px;
    }
    #api label {
        float: left;
        clear: both;
        display: block;
    }
    </style>
</head>
<body>
    <div id="panel"></div>

    <div id="api">
        <label for="setHeight">setHeight</label>
        <input id="setHeight" value="200"/>
    </div>
</body>
</html>
